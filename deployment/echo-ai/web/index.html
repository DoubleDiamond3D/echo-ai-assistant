<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Echo AI Assistant - Control Center</title>
  <link rel="stylesheet" href="/assets/app.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app">
    <header class="app__header">
      <div class="header__left">
        <div class="logo">
          <div class="logo__icon">ðŸ¤–</div>
          <div>
            <h1>Echo AI Assistant</h1>
            <p class="tagline">Intelligent telepresence &amp; automation hub</p>
          </div>
        </div>
      </div>
      <div class="header__right">
        <div class="status">
          <div class="status__light" id="status-light"></div>
          <div>
            <span id="status-label">Disconnected</span>
            <small id="status-sub">Awaiting API keyâ€¦</small>
          </div>
        </div>
        <nav class="nav">
          <button class="nav__button" data-tab="dashboard">Dashboard</button>
          <button class="nav__button" data-tab="chat">Chat</button>
          <button class="nav__button" data-tab="config">Config</button>
          <button class="nav__button" data-tab="backup">Backup</button>
        </nav>
      </div>
    </header>

    <!-- Connection Panel (shown when disconnected) -->
    <section class="panel panel--wide" id="connection-panel">
      <h2>Connect to Echo</h2>
      <form id="api-form" class="connection">
        <label for="api-key">API key</label>
        <div class="connection__row">
          <input type="password" id="api-key" placeholder="Enter the key configured in .env">
          <button type="submit" class="button button--primary">Connect</button>
        </div>
        <label class="remember">
          <input type="checkbox" id="remember-key" checked>
          Remember this key on this device
        </label>
      </form>
    </section>

    <!-- Main Content Tabs -->
    <main class="main-content" id="main-content" style="display: none;">
      <!-- Dashboard Tab -->
      <div class="tab-content" id="dashboard-tab">
        <div class="grid">
          <section class="panel">
            <h2>System Metrics</h2>
            <div class="metrics">
              <div>
                <span class="label">CPU</span>
                <span class="value" id="metric-cpu">â€“</span>
              </div>
              <div>
                <span class="label">Memory</span>
                <span class="value" id="metric-mem">â€“</span>
              </div>
              <div>
                <span class="label">Uptime</span>
                <span class="value" id="metric-uptime">â€“</span>
              </div>
              <div>
                <span class="label">Temperature</span>
                <span class="value" id="metric-temp">â€“</span>
              </div>
            </div>
            <p class="metric-sub" id="metric-host">â€”</p>
          </section>

          <section class="panel" id="state-panel">
            <h2>Echo State</h2>
            <div class="state-control">
              <div class="state-control__modes">
                <button data-mode="idle" class="chip">Idle</button>
                <button data-mode="talking" class="chip">Talking</button>
                <button data-mode="sleeping" class="chip">Sleeping</button>
              </div>
              <div class="toggles">
                <label class="toggle">
                  <input type="checkbox" data-toggle="listening">
                  <span>Voice Listening</span>
                </label>
                <label class="toggle">
                  <input type="checkbox" data-toggle="beam">
                  <span>Status Lights</span>
                </label>
              </div>
            </div>
            <dl class="state-detail">
              <div>
                <dt>Current Mode</dt>
                <dd id="state-mode">â€”</dd>
              </div>
              <div>
                <dt>Last Spoke</dt>
                <dd id="state-last">â€”</dd>
              </div>
            </dl>
          </section>

          <section class="panel panel--tall">
            <h2>Camera Feed</h2>
            <div class="camera">
              <div class="camera__bar">
                <select id="camera-select"></select>
                <div>
                  <button id="camera-refresh" class="button button--ghost">Refresh</button>
                </div>
              </div>
              <div class="camera__viewport">
                <img id="camera-feed" alt="Camera feed" />
                <div class="camera__overlay" id="camera-overlay">Waiting for feedâ€¦</div>
              </div>
            </div>
          </section>

          <section class="panel panel--tall">
            <h2>Voice Control</h2>
            <div class="voice-controls">
              <div class="voice-status">
                <div class="voice-indicator" id="voice-indicator">
                  <div class="indicator-dot"></div>
                  <span id="voice-status-text">Not Listening</span>
                </div>
                <button id="voice-toggle" class="button button--secondary">Start Listening</button>
              </div>
              <form id="speech-form" class="speech">
                <label for="speech-text">Send Message</label>
                <textarea id="speech-text" rows="3" placeholder="Type a message or use voice input..."></textarea>
                <div class="speech__row">
                  <label>
                    Voice
                    <input id="speech-voice" type="text" placeholder="Default">
                  </label>
                  <button type="submit" class="button button--primary">Send</button>
                </div>
              </form>
              <div class="speech-queue">
                <h3>Speech Queue</h3>
                <ul id="speech-queue"></ul>
              </div>
            </div>
          </section>

          <section class="panel panel--wide">
            <h2>System Events</h2>
            <ul class="log" id="event-log"></ul>
          </section>
        </div>
      </div>

      <!-- Chat Tab -->
      <div class="tab-content" id="chat-tab" style="display: none;">
        <div class="chat-container">
          <div class="chat-messages" id="chat-messages">
            <div class="chat-welcome">
              <h3>Chat with Echo</h3>
              <p>Start a conversation with your AI assistant. You can type or use voice input.</p>
            </div>
          </div>
          <div class="chat-input">
            <form id="chat-form">
              <div class="chat-input__row">
                <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off">
                <button type="submit" class="button button--primary">Send</button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- Configuration Tab -->
      <div class="tab-content" id="config-tab" style="display: none;">
        <div class="config-sections">
          <section class="panel">
            <h2>AI Configuration</h2>
            <div class="config-form">
              <div class="form-group">
                <label for="ai-model">AI Model</label>
                <select id="ai-model">
                  <option value="qwen2.5:latest">Qwen 2.5 (Latest)</option>
                  <option value="qwen2.5:7b">Qwen 2.5 7B</option>
                  <option value="qwen2.5:14b">Qwen 2.5 14B</option>
                  <option value="llama3.2:latest">Llama 3.2 (Latest)</option>
                </select>
              </div>
              <div class="form-group">
                <label for="ollama-url">Ollama URL</label>
                <input type="url" id="ollama-url" placeholder="http://localhost:11434">
              </div>
              <div class="form-group">
                <label for="openai-key">OpenAI API Key (Optional)</label>
                <input type="password" id="openai-key" placeholder="sk-...">
              </div>
            </div>
          </section>

          <section class="panel">
            <h2>Voice Settings</h2>
            <div class="config-form">
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="voice-enabled" checked>
                  <span>Enable Voice Input</span>
                </label>
              </div>
              <div class="form-group">
                <label for="voice-device">Audio Device</label>
                <select id="voice-device">
                  <option value="default">Default</option>
                  <option value="usb">USB Microphone</option>
                  <option value="bluetooth">Bluetooth</option>
                </select>
              </div>
              <div class="form-group">
                <label for="voice-language">Language</label>
                <select id="voice-language">
                  <option value="en">English</option>
                  <option value="es">Spanish</option>
                  <option value="fr">French</option>
                  <option value="de">German</option>
                </select>
              </div>
            </div>
          </section>

          <section class="panel">
            <h2>Face Recognition</h2>
            <div class="config-form">
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="face-recognition-enabled" checked>
                  <span>Enable Face Recognition</span>
                </label>
              </div>
              <div class="form-group">
                <label for="face-confidence">Recognition Confidence</label>
                <input type="range" id="face-confidence" min="0.1" max="1.0" step="0.1" value="0.6">
                <span class="range-value">0.6</span>
              </div>
              <div class="face-management">
                <h3>Known Faces</h3>
                <div id="known-faces-list"></div>
                <button id="add-face-btn" class="button button--secondary">Add New Face</button>
              </div>
            </div>
          </section>

          <section class="panel">
            <h2>Network Settings</h2>
            <div class="config-form">
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="wifi-setup-enabled" checked>
                  <span>Enable WiFi Setup</span>
                </label>
              </div>
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="remote-access-enabled" checked>
                  <span>Enable Remote Access</span>
                </label>
              </div>
              <div class="form-group">
                <label for="cloudflare-token">Cloudflare Tunnel Token</label>
                <input type="password" id="cloudflare-token" placeholder="Enter tunnel token">
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Backup Tab -->
      <div class="tab-content" id="backup-tab" style="display: none;">
        <div class="backup-container">
          <section class="panel">
            <h2>Create Backup</h2>
            <div class="backup-config">
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="backup-chat-logs" checked>
                  <span>Include Chat Logs</span>
                </label>
              </div>
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="backup-face-data" checked>
                  <span>Include Face Data</span>
                </label>
              </div>
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="backup-system-logs" checked>
                  <span>Include System Logs</span>
                </label>
              </div>
              <div class="form-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="backup-camera-recordings">
                  <span>Include Camera Recordings</span>
                </label>
              </div>
              <div class="form-group">
                <label for="backup-name">Backup Name (Optional)</label>
                <input type="text" id="backup-name" placeholder="echo_backup_2025">
              </div>
              <button id="create-backup-btn" class="button button--primary">Create Backup</button>
            </div>
          </section>

          <section class="panel">
            <h2>Backup History</h2>
            <div class="backup-list" id="backup-list">
              <div class="backup-item">
                <div class="backup-info">
                  <h3>No backups yet</h3>
                  <p>Create your first backup to see it here.</p>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>

  <script type="module" src="/assets/app.js"></script>
</body>
</html>
